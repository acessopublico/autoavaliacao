<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BRASFORT.AI</title>
  <style>
    :root{
      --brand:#0f4db6;
      --brand-dark:#0a3a86;
      --bg-start:#e7eefb;
      --bot-bubble:#dff0ff;
      --user-bubble:#dcf8c6;
      --muted:#697582;
      --glass: rgba(255,255,255,0.97);
      --chat-width:420px;
      --radius:16px;
      --header-height:72px;
      --font: 'Barlow', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      --card-red:#fde2e2;
      --card-yellow:#fff4d6;
      --card-green:#e6f7e9;
      --card-blue:#dfeeff;
    }
    html,body{height:100%;margin:0;font-family:var(--font);background:linear-gradient(180deg,var(--bg-start) 0%, #eef4fb 100%);color:#17324a}
    /* layout */
    .stage{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
    .app{width:100%;max-width:calc(var(--chat-width) + 320px);display:flex;gap:20px;align-items:flex-start;justify-content:center;position:relative}
    /* phone mock */
    .phone{width:var(--chat-width);background:var(--glass);border-radius:18px;box-shadow:0 18px 35px rgba(16,40,80,0.12);overflow:hidden;border:1px solid rgba(10,30,70,0.06);height:88vh;display:flex;flex-direction:column;position:relative}
    /* header fixed */
    .header{background:linear-gradient(90deg,var(--brand) 0%, var(--brand-dark) 100%);color:#fff;padding:10px 12px 10px 12px;display:flex;align-items:center;gap:10px;flex:0 0 var(--header-height);position:relative;border-radius: var(--radius) var(--radius) 0 0;}
    .back-btn{width:40px;height:40px;border-radius:50%;display:inline-grid;place-items:center;background:rgba(255,255,255,0.12);cursor:pointer;margin-right:6px;flex:0 0 40px;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .back-btn:hover{transform: scale(1.1) rotate(-180deg); background:rgba(255,255,255,0.2);}
    .back-btn:active{transform: scale(0.95);}
    .avatar{width:48px;height:48px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,0.14);flex:0 0 48px;cursor:pointer;transition: all 0.3s ease;}
    .avatar:hover{transform: scale(1.05); border-color:rgba(255,255,255,0.3);}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{flex:1;min-width:0}
    .meta .name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta .status{font-size:12px;opacity:0.95}
    .icons{display:flex;gap:8px;margin-left:8px}
    .icon-btn{width:36px;height:36px;border-radius:50%;display:inline-grid;place-items:center;background:rgba(255,255,255,0.12);cursor:pointer;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .icon-btn:hover{transform: translateY(-2px) scale(1.1); background:rgba(255,255,255,0.2);}
    .icon-btn:active{transform: scale(0.95);}
    /* chat */
    .chat{padding:12px;display:flex;flex-direction:column;gap:12px;flex:1 1 auto;overflow:hidden}
    .messages{flex:1 1 auto;overflow:auto;padding-right:6px;display:flex;flex-direction:column;gap:12px}
    .bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.35;box-shadow:0 6px 12px rgba(12,30,60,0.04);font-size:14px;white-space:pre-wrap}
    .bot{align-self:flex-start;background:var(--bot-bubble);border-top-left-radius:6px;color:#0c2b45}
    .user{align-self:flex-end;background:var(--user-bubble);border-top-right-radius:6px;color:#06301a}
    .typing{display:inline-flex;gap:8px;align-items:center;font-style:italic;color:#2b486f}
    .dot{width:6px;height:6px;background:var(--brand);border-radius:50%;opacity:0.85;animation:blink 1s infinite}
    .dot:nth-child(2){animation-delay:.12s}
    .dot:nth-child(3){animation-delay:.24s}
    @keyframes blink{0%,100%{opacity:.18}50%{opacity:1}}
    .options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .opt{background:white;border:1px solid rgba(15,77,182,0.12);padding:10px 12px;border-radius:12px;cursor:pointer;text-align:left;color:#07284a;font-weight:600;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .opt:hover{background:rgba(15,77,182,0.04); transform: translateX(4px); box-shadow: 0 4px 8px rgba(15,77,182,0.1);}
    .opt:active{transform: scale(0.98);}
    .footer{display:flex;gap:8px;padding:10px;background:transparent;align-items:center}
    .start-btn{background:var(--brand);color:#fff;padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:700;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .start-btn:hover{background:var(--brand-dark); transform: scale(1.05); box-shadow: 0 4px 12px rgba(15,77,182,0.3);}
    .start-btn:active{transform: scale(0.95);}
    .start-btn.restart{background:#475569; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .start-btn.restart:hover{background:#5a6472; transform: scale(1.05); box-shadow: 0 4px 12px rgba(71,85,105,0.3);}
    .start-btn.restart:active{transform: scale(0.95);}
    /* profile modal */
    .profile-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(5,10,20,0.45);z-index:40}
    .profile-card{width:360px;background:#fff;border-radius:12px;padding:18px;color:#1b2b43;box-shadow:0 10px 30px rgba(8,20,40,0.12)}
    .profile-top{display:flex;gap:12px;align-items:center}
    .profile-top img{width:84px;height:84px;border-radius:50%;object-fit:cover}
    .profile-actions{display:flex;gap:8px;margin-top:12px}
    .pbtn{flex:1;padding:10px;border-radius:8px;border:1px solid #e6eef9;cursor:pointer;background:#f7fbff;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .pbtn:hover{transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
    .pbtn:active{transform: scale(0.98);}
    .pbtn.whats{background:linear-gradient(90deg,var(--brand),var(--brand-dark));color:#fff;border:none; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .pbtn.whats:hover{transform: scale(1.02); box-shadow: 0 4px 12px rgba(15,77,182,0.4);}
    .pbtn.whats:active{transform: scale(0.98);}
    .small{font-size:13px;color:#546579}
    /* side panel */
    .side{width:260px;background:linear-gradient(180deg,#ffffff, #f7fbff);border-radius:12px;padding:12px;border:1px solid rgba(10,30,70,0.04)}
    .side h4{margin:6px 0}
    .side p{font-size:13px;color:#4b5b6b}
    /* result card */
    .result-card{
      border-radius:12px;
      padding:14px;
      color:#08304a;
      box-shadow:0 8px 18px rgba(8,20,40,0.08);
      transform-origin:center;
      opacity:0;
      transform:translateY(18px) scale(0.94);
      transition:opacity .55s ease,transform .55s ease;
    }
    .stage-title{font-weight:800;font-size:16px;margin-bottom:6px}
    .stage-desc{font-size:14px;color:#0d3350}
    .action-buttons{display:flex;gap:8px;margin-top:10px}
    .action-btn{padding:8px 10px;border-radius:8px;border:none;cursor:pointer;font-weight:700;flex:1;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .action-btn:hover{transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15);}
    .action-btn:active{transform: scale(0.98);}
    .action-whats{background:linear-gradient(90deg,var(--brand),var(--brand-dark));color:#fff; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .action-whats:hover{transform: scale(1.02); box-shadow: 0 4px 12px rgba(15,77,182,0.4);}
    .action-whats:active{transform: scale(0.98);}
    /* intro overlay */
    .intro-overlay{
      position:absolute;inset:0;background:linear-gradient(180deg,rgba(15,77,182,0.95),rgba(10,38,110,0.95));color:#fff;display:flex;align-items:center;justify-content:center;z-index:50;flex-direction:column;padding:20px;
    }
    .brasfort-title{font-weight:900;letter-spacing:6px;margin:0;display:inline-block;transform-origin:center;filter:drop-shadow(0 6px 18px rgba(0,0,0,0.25))}
    .brasfort-sub{opacity:.95;margin-top:8px}
    .intro-card{background:rgba(255,255,255,0.06);padding:18px;border-radius:12px;text-align:center;max-width:360px}
    .intro-cta{margin-top:14px;padding:10px 16px;border-radius:12px;border:none;background:#fff;color:var(--brand);font-weight:800;cursor:pointer;transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
    .intro-cta:hover{transform: scale(1.05); box-shadow: 0 4px 12px rgba(255,255,255,0.3);}
    .intro-cta:active{transform: scale(0.95);}
    .intro-small{font-size:13px;opacity:.9;margin-top:10px}
    /* responsive */
    @media(max-width:900px){.app{flex-direction:column;align-items:center}.side{display:none}.phone{height:94vh;width:96vw}}
  </style>
</head>
<body>
  <div class="stage">
    <div class="app">
      <div class="phone" role="application" aria-label="Chat BIA">
Â 
        <!-- header -->
        <div class="header">
          <div class="back-btn" id="backBtn" title="Voltar" aria-label="Voltar">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div class="avatar" id="avatarBtn" title="Perfil da BIA" aria-label="Perfil da BIA">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaVmx61OauAWoTFDJ7eMLEd1zXSnsQdQZSoQ&s" alt="BIA avatar">
          </div>
          <div class="meta">
            <div class="name">BIA ðŸ’™</div>
            <div class="status">Online</div>
          </div>
          <div class="icons">
            <div class="icon-btn" id="callBtn" title="Abrir conversa RH (WhatsApp)" aria-label="Abrir conversa RH (WhatsApp)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.79 19.79 0 0 1 2.08 4.18 2 2 0 0 1 4 2h3a2 2 0 0 1 2 1.72c.12 1.05.34 2.07.65 3.05a2 2 0 0 1-.45 2.11L8.91 10.91a16 16 0 0 0 6 6l1.03-1.03a2 2 0 0 1 2.11-.45c.98.31 2 .53 3.05.65A2 2 0 0 1 22 16.92z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <div class="icon-btn" id="videoBtn" title="Abrir conversa RH (WhatsApp)" aria-label="Abrir conversa RH (WhatsApp)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M23 7l-7 5v4l7 5V7zM1 5h14v14H1z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
          </div>
        </div>
Â 
        <!-- chat -->
        <div class="chat" id="chatArea">
          <div class="messages" id="messages"></div>
Â 
          <div class="footer">
            <button class="start-btn" id="startBtn">Iniciar conversa</button>
          </div>
        </div>
Â 
        <!-- INTRO OVERLAY (macro -> micro effect) -->
        <div class="intro-overlay" id="introOverlay" aria-hidden="false">
          <div style="text-align:center">
            <div class="brasfort-title" id="brasfortTitle" style="font-size:52px;transform:scale(1);">BRASFORT</div>
            <div class="brasfort-sub" style="font-size:14px;margin-top:8px;opacity:.95">Mais que seguranÃ§a, Ã© confianÃ§a.</div>
            <div class="brasfort-sub" style="font-size:14px;margin-top:8px;opacity:.95"></div>
Â 
            <div class="intro-card" style="margin-top:18px">
              <div style="font-weight:700;font-size:16px;margin-bottom:6px">ConheÃ§a a BIA</div>
              <div style="font-size:14px;color:#eef5ff;opacity:.95">
                Brasfort InteligÃªncia Artificial.
              </div>
             
              <button class="intro-cta" id="introStartBtn" style="display:inline-block">Iniciar</button>
            </div>
          </div>
        </div>
Â 
      </div>
Â 
      <aside class="side" aria-hidden>
        <h4>BIA â€” como funciona</h4>
        <p>Conversa guiada pela BIA para avaliar sua adaptaÃ§Ã£o Ã  mudanÃ§a. Responda clicando nas opÃ§Ãµes. No final, receberÃ¡ um <b>estÃ¡gio</b> com orientaÃ§Ã£o prÃ¡tica (sem pontuaÃ§Ã£o numÃ©rica).</p>
        <h4>ObservaÃ§Ãµes</h4>
        <p class="small">Clique na foto para ver o perfil. BotÃ£o de chamada abre o WhatsApp do RH: <b>(61) 99605-0605</b>. VÃ­deo: abre o WhatsApp do RH.</p>
      </aside>
    </div>
  </div>
Â 
  <!-- profile modal -->
  <div class="profile-modal" id="profileModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="profile-card" role="document">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>BIA ðŸ’™</strong>
        <button onclick="closeModal()" style="background:transparent;border:none;font-size:18px;cursor:pointer;transition: all 0.3s ease;">âœ•</button>
      </div>
      <div class="profile-top">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaVmx61OauAWoTFDJ7eMLEd1zXSnsQdQZSoQ&s" alt="bia">
        <div>
          <div style="font-weight:700">BIA â€” Brasfort Inteligencia Artificial</div>
          <div class="small">Apoio em gestÃ£o e desenvolvimento â€” respostas diretas e objetivas.</div>
          <div style="margin-top:8px" class="small">Status: <span style="color:var(--brand)">Online</span></div>
        </div>
      </div>
      <div style="margin-top:12px">
        <div class="small">Contato RH</div>
        <div style="display:flex;gap:8px;margin-top:8px" class="profile-actions">
          <button class="pbtn whats" onclick="openWhatsApp()">Abrir WhatsApp<br><small style="opacity:.9">(61) 99605-0605</small></button>
          <button class="pbtn" onclick="copyNumber()">Copiar nÃºmero</button>
        </div>
      </div>
    </div>
  </div>
Â 
<script>
  // ---------- ROTEIRO (cada resposta com feedback estratÃ©gico) ----------
  const roteiro = [
    {
      q: 'Pra comeÃ§ar: vocÃª sente que entendeu bem o que estÃ¡ mudando e por quÃª?',
      opts: [
        { t: 'Ainda nÃ£o, tÃ´ tentando entender.', p:0, feedback: 'Entendido. Comece por solicitar um resumo conciso ao seu gestor e destaque as 3 dÃºvidas principais.'},
        { t: 'Entendo parte, mas ainda tenho dÃºvidas.', p:8, feedback: 'Bom sinal â€” documente as dÃºvidas por tÃ³pico e peÃ§a esclarecimentos curtos e objetivos.'},
        { t: 'Sim â€” entendi o que mudou e por quÃª.', p:17, feedback: 'Ã“timo. Use esse entendimento para priorizar mudanÃ§as prÃ¡ticas no seu dia a dia.'}
      ]
    },
    {
      q: 'Mesmo com dÃºvidas, vocÃª toparia experimentar o novo jeito de trabalhar?',
      opts: [
        { t: 'Prefiro manter o jeito antigo por enquanto.', p:0, feedback: 'Compreendo. Sugiro definir um teste controlado para avaliar riscos sem comprometer tarefas crÃ­ticas.'},
        { t: 'Tenho receio, mas estou tentando me adaptar.', p:8, feedback: 'Certo â€” tente aplicar em tarefas de baixo impacto e registre aprendizados para ajustar.'},
        { t: 'Sim! Estou curioso(a) e quero testar.', p:17, feedback: 'Perfeito â€” defina critÃ©rios objetivos para julgar o teste e repita quando aprovar.'}
      ]
    },
    {
      q: 'E vocÃª jÃ¡ tentou aplicar algo diferente no seu dia a dia?',
      opts: [
        { t: 'Ainda nÃ£o comecei.', p:0, feedback: 'Sem problema â€” identifique uma tarefa simples esta semana e execute em modo de teste.'},
        { t: 'Testei algo, mas sÃ³ de vez em quando.', p:8, feedback: 'Bom comeÃ§o. FaÃ§a um registro breve dos resultados para decidir se amplia a mudanÃ§a.'},
        { t: 'JÃ¡ adaptei minha rotina e uso o novo.', p:17, feedback: 'Ã“timo nÃ­vel de engajamento â€” documente os passos que funcionam para replicar.'}
      ]
    },
    {
      q: 'Quando aplica o novo formato, vocÃª se sente seguro(a)?',
      opts: [
        { t: 'NÃ£o sei aplicar direito ainda.', p:0, feedback: 'Recomendado: peÃ§a um walkthrough (passo a passo) prÃ¡tico com um colega experiente â€” 15â€“30 minutos podem acelerar.'},
        { t: 'Consigo, mas Ã s vezes fico com dÃºvida.', p:8, feedback: 'Normal. Um checklist simples ajuda a reduzir a incerteza e padronizar a execuÃ§Ã£o.'},
        { t: 'Sim â€” aplico com seguranÃ§a e clareza.', p:17, feedback: 'Excelente â€” registre pontos de melhoria e compartilhe com o time.'}
      ]
    },
    {
      q: 'VocÃª jÃ¡ ajudou algum colega a entender esse novo jeito?',
      opts: [
        { t: 'Ainda nÃ£o compartilhei.', p:0, feedback: 'Tudo bem â€” primeiro consolide seu conhecimento e depois compartilhe passos claros.'},
        { t: 'JÃ¡ dei uma forÃ§a, mas fiquei inseguro(a).', p:8, feedback: 'Ao ensinar vocÃª solidifica seu aprendizado â€” prepare um roteiro curto para ganhar confianÃ§a.'},
        { t: 'Sim â€” jÃ¡ orientei colegas com confianÃ§a.', p:17, feedback: 'Ã“timo â€” seu papel como multiplicador Ã© estratÃ©gico; continue apoiando o time.'}
      ]
    },
    {
      q: 'Hoje, o novo jeito jÃ¡ parece natural pra vocÃª?',
      opts: [
        { t: 'Prefiro o jeito antigo.', p:0, feedback: 'Entendo. Observe benefÃ­cios concretos por 1 semana para avaliar possÃ­veis ganhos.'},
        { t: 'TÃ´ me acostumando, mas ainda exige esforÃ§o.', p:8, feedback: 'Progresso vÃ¡lido. Divida a tarefa atÃ© que os passos se tornem automÃ¡ticos.'},
        { t: 'JÃ¡ Ã© natural â€” virou rotina.', p:17, feedback: 'ParabÃ©ns â€” integraÃ§Ã£o estÃ¡ ocorrendo. Considere apoiar colegas com pequenas sessÃµes.'}
      ]
    }
  ];
Â 
  // ---------- ELEMENTOS ----------
  const messages = document.getElementById('messages');
  const startBtn = document.getElementById('startBtn');
  const introOverlay = document.getElementById('introOverlay');
  const introStartBtn = document.getElementById('introStartBtn');
  const brasfortTitle = document.getElementById('brasfortTitle');
  const avatarBtn = document.getElementById('avatarBtn');
  const profileModal = document.getElementById('profileModal');
  const callBtn = document.getElementById('callBtn');
  const videoBtn = document.getElementById('videoBtn');
  const backBtn = document.getElementById('backBtn');
Â 
  let index = 0, score = 0, maxScore = roteiro.length * 17, started = false;
  let resultCard = null, tipsBubble = null;
Â 
  // animate brasfort title: macro -> micro
  (function animateTitle(){
    brasfortTitle.style.transform = 'scale(2.6)';
    brasfortTitle.style.opacity = '0';
    setTimeout(()=> {
      brasfortTitle.style.transition = 'transform 800ms cubic-bezier(.2,.9,.2,1), opacity 700ms';
      brasfortTitle.style.transform = 'scale(1)';
      brasfortTitle.style.opacity = '1';
    }, 80);
  })();
Â 
  // ---------- HELPERS ----------
  function appendBubble(text, cls='bot', html=false){
    const el = document.createElement('div');
    el.className = 'bubble ' + cls;
    if(html) el.innerHTML = text;
    else el.textContent = text;
    messages.appendChild(el);
    messages.scrollTop = messages.scrollHeight;
    return el;
  }
Â 
  function showTypingBubble(messageLabel = 'BIA estÃ¡ pensando...'){
    const t = document.createElement('div');
    t.className = 'bubble bot typing';
    t.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span> ' + messageLabel;
    messages.appendChild(t);
    messages.scrollTop = messages.scrollHeight;
    return t;
  }
Â 
  function renderOptions(opts){
    const container = document.createElement('div');
    container.className = 'options';
    opts.forEach((opt)=>{
      const b = document.createElement('button');
      b.className = 'opt';
      b.textContent = opt.t;
      b.onclick = ()=> selectOption(opt, container);
      container.appendChild(b);
    });
    messages.appendChild(container);
    messages.scrollTop = messages.scrollHeight;
    return container;
  }
Â 
  // ---------- SELEÃ‡ÃƒO ----------
  function selectOption(opt, container){
    appendBubble(opt.t, 'user');
    score += opt.p;
    container.remove();
Â 
    const thinking = showTypingBubble();
    const thinkingTime = 900 + Math.floor(Math.random()*900);
    setTimeout(()=> {
      thinking.remove();
      appendBubble(opt.feedback, 'bot');
Â 
      index++;
      if(index < roteiro.length){
        setTimeout(()=> askQuestion(index), 800);
      } else {
        setTimeout(showResultCard, 900);
      }
    }, thinkingTime);
  }
Â 
  function askQuestion(i){
    const t = showTypingBubble('BIA estÃ¡ preparando a prÃ³xima pergunta...');
    const delay = 500 + Math.floor(Math.random()*600);
    setTimeout(()=> {
      t.remove();
      const q = roteiro[i];
      appendBubble('<strong>'+ q.q +'</strong>', 'bot', true);
      renderOptions(q.opts);
    }, delay);
  }
Â 
  // ---------- INICIO DA CONVERSA ----------
  function startConversation(){
    // hide intro overlay (if visible)
    if(introOverlay && introOverlay.style.display !== 'none') {
      introOverlay.style.display = 'none';
      introOverlay.setAttribute('aria-hidden','true');
    }
Â 
    // reset
    messages.innerHTML = '';
    index = 0; score = 0; started = true; resultCard = null; tipsBubble = null;
    startBtn.textContent = 'Reiniciar conversa';
    startBtn.classList.add('restart');
Â 
    // initial BIA intro as chat message (with typing)
    const t = showTypingBubble('BIA estÃ¡ iniciando a avaliaÃ§Ã£o...');
    setTimeout(()=> {
      t.remove();
      appendBubble('OlÃ¡ â€” sou a BIA, InteligÃªncia Artificial da Brasfort.'); // intro short
      appendBubble('Vou aplicar uma breve avaliaÃ§Ã£o sobre sua adaptaÃ§Ã£o Ã  mudanÃ§a. Responda as opÃ§Ãµes conforme achar mais adequado.'); // instruction
      setTimeout(()=> askQuestion(0), 900);
    }, 1000);
  }
Â 
  // ---------- RESULTADO (CARD COLORIDO + MENSAGEM DE ORIENTAÃ‡ÃƒO) ----------
  function showResultCard(){
    const percent = Math.min(Math.round((score / maxScore) * 100), 100);
    let label='', explanation='', color='', textColor='#08304a';
Â 
    if(percent <= 25){
      label = 'Choque / Incerteza';
      explanation = 'Com base nas suas respostas, vocÃª estÃ¡ no comeÃ§o do processo de assimilaÃ§Ã£o. Priorize compreensÃ£o objetiva do propÃ³sito e peÃ§a apoio direto.';
      color = 'var(--card-red)';
      textColor = '#6b1e1e';
    } else if(percent <= 50){
      label = 'NegaÃ§Ã£o / Crise';
      explanation = 'VocÃª demonstra resistÃªncia ou dÃºvidas. Foque em aÃ§Ãµes pequenas e aprendizado com colegas que jÃ¡ aplicam.';
      color = 'var(--card-yellow)';
      textColor = '#6b4900';
    } else if(percent <= 75){
      label = 'AceitaÃ§Ã£o / DecisÃ£o';
      explanation = 'VocÃª estÃ¡ experimentando e aprendendo. Continue consolidando rotinas para ganhar confianÃ§a e consistÃªncia.';
      color = 'var(--card-green)';
      textColor = '#165c2b';
    } else {
      label = 'IntegraÃ§Ã£o';
      explanation = 'VocÃª incorporou o novo e jÃ¡ serve de referÃªncia. Mantenha o suporte a colegas e proponha melhorias contÃ­nuas.';
      color = 'var(--card-blue)';
      textColor = '#06314d';
    }
Â 
    // create card
    resultCard = document.createElement('div');
    resultCard.className = 'result-card';
    resultCard.style.background = color;
    resultCard.style.color = textColor;
    resultCard.innerHTML = `
      <div class="stage-title">EstÃ¡gio detectado â€” <strong>${label}</strong></div>
      <div class="stage-desc">${explanation}</div>
      <!-- BOTÃ•ES DE AÃ‡ÃƒO -->
      <div class="action-buttons">
        <button class="action-btn action-whats" onclick="openWhatsApp()">ðŸ’¬ Falar com RH</button>
        <button class="action-btn" onclick="showSuggestions()">ðŸ’¡ Ver sugestÃµes</button>
      </div>
    `;
    messages.appendChild(resultCard);
    messages.scrollTop = messages.scrollHeight;
Â 
    // animate in
    requestAnimationFrame(()=> {
      resultCard.style.opacity = '1';
      resultCard.style.transform = 'translateY(0) scale(1)';
    });
Â 
    // ensure restart button state
    startBtn.textContent = 'Reiniciar conversa';
    startBtn.classList.add('restart');
  }
Â 
  function getTipsForStage(label){
    if(label === 'Choque / Incerteza'){
      return [
        'PeÃ§a um resumo objetivo ao lÃ­der sobre os motivos da mudanÃ§a.',
        'Reserve 15 minutos para revisar a documentaÃ§Ã£o essencial.',
        'Liste 3 dÃºvidas e encaminhe ao seu gestor ou RH.'
      ];
    }
    if(label === 'NegaÃ§Ã£o / Crise'){
      return [
        'Escolha uma atividade pequena para testar por 3 dias.',
        'Converse com um colega que jÃ¡ adotou o novo processo.',
        'Registre resultados simples: o que funcionou e o que ajustar.'
      ];
    }
    if(label === 'AceitaÃ§Ã£o / DecisÃ£o'){
      return [
        'Padronize passos que deram certo para replicar.',
        'PeÃ§a feedback do lÃ­der sobre suas prÃ¡ticas iniciais.',
        'Compartilhe um aprendizado com um colega esta semana.'
      ];
    }
    return [
      'Documente e compartilhe prÃ¡ticas bem-sucedidas com o time.',
      'Organize um microtreino de 15 minutos para colegas.',
      'Proponha uma melhoria com base na sua experiÃªncia prÃ¡tica.'
    ];
  }
Â 
  // ---------- HANDLERS ----------
  // start via intro button
  introStartBtn.addEventListener('click', startConversation);
  // footer start button behavior
  startBtn.addEventListener('click', () => {
    // if intro still visible, hide and start; else simply restart
    if(introOverlay && introOverlay.style.display !== 'none') {
      startConversation();
    } else {
      startConversation();
    }
  });
Â 
  // profile modal
  avatarBtn.addEventListener('click', () => {
    profileModal.style.display = 'flex';
    profileModal.setAttribute('aria-hidden','false');
  });
  window.closeModal = () => {
    profileModal.style.display = 'none';
    profileModal.setAttribute('aria-hidden','true');
  };
Â 
  // call / video / back
  callBtn.addEventListener('click', openWhatsApp);
  videoBtn.addEventListener('click', openWhatsApp);
  backBtn.addEventListener('click', () => {
    if (window.history.length > 1) {
      window.history.back();
    } else {
      window.location.reload();
    }
  });
Â 
  // utilities exposed for buttons
  window.copyNumber = () => {
    const number = '(61) 99605-0605';
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(number).then(() => {
        alert('NÃºmero copiado: ' + number);
      }).catch(() => {
        // Fallback para navegadores mais antigos
        const textArea = document.createElement('textarea');
        textArea.value = number;
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand('copy');
          alert('NÃºmero copiado: ' + number);
        } catch (err) {
          alert('Falha ao copiar. NÃºmero: ' + number);
        }
        document.body.removeChild(textArea);
      });
    } else {
      // Fallback antigo
      const textArea = document.createElement('textarea');
      textArea.value = number;
      document.body.appendChild(textArea);
      textArea.select();
      try {
        document.execCommand('copy');
        alert('NÃºmero copiado: ' + number);
      } catch (err) {
        alert('Falha ao copiar. NÃºmero: ' + number);
      }
      document.body.removeChild(textArea);
    }
  };

  window.showSuggestions = () => {
    if(tipsBubble) return;
    appendBubble('Minha sugestÃ£o prÃ¡tica â€” passos objetivos para avanÃ§ar:', 'bot');
    const label = resultCard.querySelector('.stage-title strong').textContent;
    const tips = getTipsForStage(label);
    const tipsHtml = `<ul style="margin:8px 0 0 18px; padding-left:18px;">` +
                     tips.map(t => `<li style="margin-bottom:6px;">${t}</li>`).join('') +
                     `</ul>`;
    tipsBubble = appendBubble(tipsHtml, 'bot', true);
    appendBubble('Se preferir apoio humano, use o botÃ£o "Falar com RH" no card acima.', 'bot');
    const btn = resultCard.querySelector('button[onclick="showSuggestions()"]');
    if (btn) btn.style.display = 'none';
  };

  // Nova funÃ§Ã£o openWhatsApp() - evita COOP com link dinÃ¢mico
  function openWhatsApp() {
    const phone = "5561996050605";
    const message = encodeURIComponent("OlÃ¡, equipe de RH! Acabei de concluir minha avaliaÃ§Ã£o de adaptaÃ§Ã£o Ã  mudanÃ§a com a BIA e gostaria de conversar sobre os resultados.");
    const url = `https://wa.me/${phone}?text=${message}`;

    // Cria um link invisÃ­vel e simula clique (bypassa window.open)
    const link = document.createElement('a');
    link.href = url;
    link.target = '_blank';
    link.rel = 'noopener noreferrer';  // SeguranÃ§a: nÃ£o permite opener
    link.style.display = 'none';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
Â 
  // initial tiny intro inside chat as fallback (will be removed when introOverlay used)
  (function initialIntroFallback(){
    // placeholder message will be replaced when the user starts via intro overlay
    // but keep small hint in case overlay blocked
    appendBubble('Toque em "ComeÃ§ar agora" para iniciar a avaliaÃ§Ã£o conduzida pela BIA.', 'bot');
  })();
</script>
</body>
</html>
