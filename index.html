<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BRASFORT.AI</title>
  <style>
    :root{
      --brand:#0f4db6;
      --brand-dark:#0a3a86;
      --bg-start:#e7eefb;
      --bot-bubble:#dff0ff;
      --user-bubble:#dcf8c6;
      --muted:#697582;
      --glass: rgba(255,255,255,0.97);
      --chat-width:420px;
      --radius:16px;
      --header-height:72px;
      --font: 'Barlow', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      --card-red:#fde2e2;
      --card-yellow:#fff4d6;
      --card-green:#e6f7e9;
      --card-blue:#dfeeff;
    }
    html,body{height:100%;margin:0;font-family:var(--font);background:linear-gradient(180deg,var(--bg-start) 0%, #eef4fb 100%);color:#17324a}
    /* layout */
    .stage{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
    .app{width:100%;max-width:calc(var(--chat-width) + 320px);display:flex;gap:20px;align-items:flex-start;justify-content:center;position:relative}
    /* phone mock */
    .phone{width:var(--chat-width);background:var(--glass);border-radius:18px;box-shadow:0 18px 35px rgba(16,40,80,0.12);overflow:hidden;border:1px solid rgba(10,30,70,0.06);height:88vh;display:flex;flex-direction:column;position:relative}
    /* header fixed */
    .header{background:linear-gradient(90deg,var(--brand) 0%, var(--brand-dark) 100%);color:#fff;padding:10px 12px 10px 12px;display:flex;align-items:center;gap:10px;flex:0 0 var(--header-height);position:relative}
    .back-btn{width:40px;height:40px;border-radius:50%;display:inline-grid;place-items:center;background:rgba(255,255,255,0.12);cursor:pointer;margin-right:6px;flex:0 0 40px}
    .avatar{width:48px;height:48px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,0.14);flex:0 0 48px;cursor:pointer}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{flex:1;min-width:0}
    .meta .name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta .status{font-size:12px;opacity:0.95}
    .icons{display:flex;gap:8px;margin-left:8px}
    .icon-btn{width:36px;height:36px;border-radius:50%;display:inline-grid;place-items:center;background:rgba(255,255,255,0.12);cursor:pointer}
    .icon-btn:hover{transform:translateY(-2px)}
    /* chat */
    .chat{padding:12px;display:flex;flex-direction:column;gap:12px;flex:1 1 auto;overflow:hidden}
    .messages{flex:1 1 auto;overflow:auto;padding-right:6px;display:flex;flex-direction:column;gap:12px}
    .bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.35;box-shadow:0 6px 12px rgba(12,30,60,0.04);font-size:14px;white-space:pre-wrap}
    .bot{align-self:flex-start;background:var(--bot-bubble);border-top-left-radius:6px;color:#0c2b45}
    .user{align-self:flex-end;background:var(--user-bubble);border-top-right-radius:6px;color:#06301a}
    .typing{display:inline-flex;gap:8px;align-items:center;font-style:italic;color:#2b486f}
    .dot{width:6px;height:6px;background:var(--brand);border-radius:50%;opacity:0.85;animation:blink 1s infinite}
    .dot:nth-child(2){animation-delay:.12s}
    .dot:nth-child(3){animation-delay:.24s}
    @keyframes blink{0%,100%{opacity:.18}50%{opacity:1}}
    .options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .opt{background:white;border:1px solid rgba(15,77,182,0.12);padding:10px 12px;border-radius:12px;cursor:pointer;text-align:left;color:#07284a;font-weight:600}
    .opt:hover{background:rgba(15,77,182,0.04)}
    .footer{display:flex;gap:8px;padding:10px;background:transparent;align-items:center}
    .start-btn{background:var(--brand);color:#fff;padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:700}
    .start-btn.restart{background:#475569}
    /* profile modal */
    .profile-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(5,10,20,0.45);z-index:40}
    .profile-card{width:360px;background:#fff;border-radius:12px;padding:18px;color:#1b2b43;box-shadow:0 10px 30px rgba(8,20,40,0.12)}
    .profile-top{display:flex;gap:12px;align-items:center}
    .profile-top img{width:84px;height:84px;border-radius:50%;object-fit:cover}
    .profile-actions{display:flex;gap:8px;margin-top:12px}
    .pbtn{flex:1;padding:10px;border-radius:8px;border:1px solid #e6eef9;cursor:pointer;background:#f7fbff}
    .pbtn.whats{background:linear-gradient(90deg,var(--brand),var(--brand-dark));color:#fff;border:none}
    .small{font-size:13px;color:#546579}
    /* side panel */
    .side{width:260px;background:linear-gradient(180deg,#ffffff, #f7fbff);border-radius:12px;padding:12px;border:1px solid rgba(10,30,70,0.04)}
    .side h4{margin:6px 0}
    .side p{font-size:13px;color:#4b5b6b}
    /* result card */
    .result-card{
      border-radius:12px;
      padding:14px;
      color:#08304a;
      box-shadow:0 8px 18px rgba(8,20,40,0.08);
      transform-origin:center;
      opacity:0;
      transform:translateY(18px) scale(0.94);
      transition:opacity .55s ease,transform .55s ease;
    }
    .stage-title{font-weight:800;font-size:16px;margin-bottom:6px}
    .stage-desc{font-size:14px;color:#0d3350}
    .actions-row{display:flex;gap:8px;margin-top:10px}
    .action-btn{padding:8px 10px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    .action-whats{background:linear-gradient(90deg,var(--brand),var(--brand-dark));color:#fff}
    /* intro overlay */
    .intro-overlay{
      position:absolute;inset:0;background:linear-gradient(180deg,rgba(15,77,182,0.95),rgba(10,38,110,0.95));color:#fff;display:flex;align-items:center;justify-content:center;z-index:50;flex-direction:column;padding:20px;
    }
    .brasfort-title{font-weight:900;letter-spacing:6px;margin:0;display:inline-block;transform-origin:center;filter:drop-shadow(0 6px 18px rgba(0,0,0,0.25))}
    .brasfort-sub{opacity:.95;margin-top:8px}
    .intro-card{background:rgba(255,255,255,0.06);padding:18px;border-radius:12px;text-align:center;max-width:360px}
    .intro-cta{margin-top:14px;padding:10px 16px;border-radius:12px;border:none;background:#fff;color:var(--brand);font-weight:800;cursor:pointer}
    .intro-small{font-size:13px;opacity:.9;margin-top:10px}
    /* responsive */
    @media(max-width:900px){.app{flex-direction:column;align-items:center}.side{display:none}.phone{height:94vh;width:96vw}}
  </style>
</head>
<body>
  <div class="stage">
    <div class="app">
      <div class="phone" role="application" aria-label="Chat BIA">

        <!-- header -->
        <div class="header">
          <div class="back-btn" id="backBtn" title="Voltar" aria-label="Voltar">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div class="avatar" id="avatarBtn" title="Perfil da BIA" aria-label="Perfil da BIA">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaVmx61OauAWoTFDJ7eMLEd1zXSnsQdQZSoQ&s" alt="BIA avatar">
          </div>
          <div class="meta">
            <div class="name">BIA üíô</div>
            <div class="status">Online</div>
          </div>
          <div class="icons">
            <div class="icon-btn" id="callBtn" title="Abrir conversa RH (WhatsApp)" aria-label="Abrir conversa RH (WhatsApp)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.79 19.79 0 0 1 2.08 4.18 2 2 0 0 1 4 2h3a2 2 0 0 1 2 1.72c.12 1.05.34 2.07.65 3.05a2 2 0 0 1-.45 2.11L8.91 10.91a16 16 0 0 0 6 6l1.03-1.03a2 2 0 0 1 2.11-.45c.98.31 2 .53 3.05.65A2 2 0 0 1 22 16.92z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <div class="icon-btn" id="videoBtn" title="Chamada de v√≠deo" aria-label="Chamada de v√≠deo (n√£o dispon√≠vel)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M23 7l-7 5v4l7 5V7zM1 5h14v14H1z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
          </div>
        </div>

        <!-- chat -->
        <div class="chat" id="chatArea">
          <div class="messages" id="messages"></div>

          <div class="footer">
            <button class="start-btn" id="startBtn">Iniciar conversa</button>
          </div>
        </div>

        <!-- INTRO OVERLAY (macro -> micro effect) -->
        <div class="intro-overlay" id="introOverlay" aria-hidden="false">
          <div style="text-align:center">
            <div class="brasfort-title" id="brasfortTitle" style="font-size:52px;transform:scale(1);">BRASFORT</div>
            <div class="brasfort-sub" style="font-size:14px;margin-top:8px;opacity:.95">Mais que seguran√ßa, √© confian√ßa.</div>
            <div class="brasfort-sub" style="font-size:14px;margin-top:8px;opacity:.95"></div>

            <div class="intro-card" style="margin-top:18px">
              <div style="font-weight:700;font-size:16px;margin-bottom:6px">Conhe√ßa a BIA</div>
              <div style="font-size:14px;color:#eef5ff;opacity:.95">
                Brasfort Intelig√™ncia Artificial.
              </div>
              
              <button class="intro-cta" id="introStartBtn" style="display:inline-block">Iniciar</button>
            </div>
          </div>
        </div>

      </div>

      <aside class="side" aria-hidden>
        <h4>BIA ‚Äî como funciona</h4>
        <p>Conversa guiada pela BIA para avaliar sua adapta√ß√£o √† mudan√ßa. Responda clicando nas op√ß√µes. No final, receber√° um <b>est√°gio</b> com orienta√ß√£o pr√°tica (sem pontua√ß√£o num√©rica).</p>
        <h4>Observa√ß√µes</h4>
        <p class="small">Clique na foto para ver o perfil. Bot√£o de chamada abre o WhatsApp do RH: <b>(61) 99605-0605</b>. V√≠deo: n√£o dispon√≠vel.</p>
      </aside>
    </div>
  </div>

  <!-- profile modal -->
  <div class="profile-modal" id="profileModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="profile-card" role="document">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>BIA üíô</strong>
        <button onclick="closeModal()" style="background:transparent;border:none;font-size:18px;cursor:pointer">‚úï</button>
      </div>
      <div class="profile-top">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaVmx61OauAWoTFDJ7eMLEd1zXSnsQdQZSoQ&s" alt="bia">
        <div>
          <div style="font-weight:700">BIA ‚Äî Brasfort Inteligencia Artificial</div>
          <div class="small">Apoio em gest√£o e desenvolvimento ‚Äî respostas diretas e objetivas.</div>
          <div style="margin-top:8px" class="small">Status: <span style="color:var(--brand)">Online</span></div>
        </div>
      </div>
      <div style="margin-top:12px">
        <div class="small">Contato RH</div>
        <div style="display:flex;gap:8px;margin-top:8px" class="profile-actions">
          <button class="pbtn whats" onclick="openWhats()">Abrir WhatsApp<br><small style="opacity:.9">(61) 99605-0605</small></button>
          <button class="pbtn" onclick="copyNumber()">Copiar n√∫mero</button>
        </div>
      </div>
    </div>
  </div>

<script>
  // ---------- ROTEIRO (cada resposta com feedback estrat√©gico) ----------
  const roteiro = [
    {
      q: 'Pra come√ßar: voc√™ sente que entendeu bem o que est√° mudando e por qu√™?',
      opts: [
        { t: 'Ainda n√£o, t√¥ tentando entender.', p:0, feedback: 'Entendido. Comece por solicitar um resumo conciso ao seu gestor e destaque as 3 d√∫vidas principais.'},
        { t: 'Entendo parte, mas ainda tenho d√∫vidas.', p:8, feedback: 'Bom sinal ‚Äî documente as d√∫vidas por t√≥pico e pe√ßa esclarecimentos curtos e objetivos.'},
        { t: 'Sim ‚Äî entendi o que mudou e por qu√™.', p:17, feedback: '√ìtimo. Use esse entendimento para priorizar mudan√ßas pr√°ticas no seu dia a dia.'}
      ]
    },
    {
      q: 'Mesmo com d√∫vidas, voc√™ toparia experimentar o novo jeito de trabalhar?',
      opts: [
        { t: 'Prefiro manter o jeito antigo por enquanto.', p:0, feedback: 'Compreendo. Sugiro definir um teste controlado para avaliar riscos sem comprometer tarefas cr√≠ticas.'},
        { t: 'Tenho receio, mas estou tentando me adaptar.', p:8, feedback: 'Certo ‚Äî tente aplicar em tarefas de baixo impacto e registre aprendizados para ajustar.'},
        { t: 'Sim! Estou curioso(a) e quero testar.', p:17, feedback: 'Perfeito ‚Äî defina crit√©rios objetivos para julgar o teste e repita quando aprovar.'}
      ]
    },
    {
      q: 'E voc√™ j√° tentou aplicar algo diferente no seu dia a dia?',
      opts: [
        { t: 'Ainda n√£o comecei.', p:0, feedback: 'Sem problema ‚Äî identifique uma tarefa simples esta semana e execute em modo de teste.'},
        { t: 'Testei algo, mas s√≥ de vez em quando.', p:8, feedback: 'Bom come√ßo. Fa√ßa um registro breve dos resultados para decidir se amplia a mudan√ßa.'},
        { t: 'J√° adaptei minha rotina e uso o novo.', p:17, feedback: '√ìtimo n√≠vel de engajamento ‚Äî documente os passos que funcionam para replicar.'}
      ]
    },
    {
      q: 'Quando aplica o novo formato, voc√™ se sente seguro(a)?',
      opts: [
        { t: 'N√£o sei aplicar direito ainda.', p:0, feedback: 'Recomendado: pe√ßa um walkthrough (passo a passo) pr√°tico com um colega experiente ‚Äî 15‚Äì30 minutos podem acelerar.'},
        { t: 'Consigo, mas √†s vezes fico com d√∫vida.', p:8, feedback: 'Normal. Um checklist simples ajuda a reduzir a incerteza e padronizar a execu√ß√£o.'},
        { t: 'Sim ‚Äî aplico com seguran√ßa e clareza.', p:17, feedback: 'Excelente ‚Äî registre pontos de melhoria e compartilhe com o time.'}
      ]
    },
    {
      q: 'Voc√™ j√° ajudou algum colega a entender esse novo jeito?',
      opts: [
        { t: 'Ainda n√£o compartilhei.', p:0, feedback: 'Tudo bem ‚Äî primeiro consolide seu conhecimento e depois compartilhe passos claros.'},
        { t: 'J√° dei uma for√ßa, mas fiquei inseguro(a).', p:8, feedback: 'Ao ensinar voc√™ solidifica seu aprendizado ‚Äî prepare um roteiro curto para ganhar confian√ßa.'},
        { t: 'Sim ‚Äî j√° orientei colegas com confian√ßa.', p:17, feedback: '√ìtimo ‚Äî seu papel como multiplicador √© estrat√©gico; continue apoiando o time.'}
      ]
    },
    {
      q: 'Hoje, o novo jeito j√° parece natural pra voc√™?',
      opts: [
        { t: 'Prefiro o jeito antigo.', p:0, feedback: 'Entendo. Observe benef√≠cios concretos por 1 semana para avaliar poss√≠veis ganhos.'},
        { t: 'T√¥ me acostumando, mas ainda exige esfor√ßo.', p:8, feedback: 'Progresso v√°lido. Divida a tarefa at√© que os passos se tornem autom√°ticos.'},
        { t: 'J√° √© natural ‚Äî virou rotina.', p:17, feedback: 'Parab√©ns ‚Äî integra√ß√£o est√° ocorrendo. Considere apoiar colegas com pequenas sess√µes.'}
      ]
    }
  ];

  // ---------- ELEMENTOS ----------
  const messages      = document.getElementById('messages');
  const startBtn      = document.getElementById('startBtn');
  const introOverlay  = document.getElementById('introOverlay');
  const introStartBtn = document.getElementById('introStartBtn');
  const brasfortTitle = document.getElementById('brasfortTitle');
  const avatarBtn     = document.getElementById('avatarBtn');
  const profileModal  = document.getElementById('profileModal');
  const callBtn       = document.getElementById('callBtn');
  const videoBtn      = document.getElementById('videoBtn');
  const backBtn       = document.getElementById('backBtn');

  let index = 0, score = 0, maxScore = roteiro.length * 17, started = false;
  let resultCard = null, tipsBubble = null;

  // animate brasfort title: macro -> micro
  (function animateTitle(){
    brasfortTitle.style.transform = 'scale(2.6)';
    brasfortTitle.style.opacity = '0';
    setTimeout(()=> {
      brasfortTitle.style.transition = 'transform 800ms cubic-bezier(.2,.9,.2,1), opacity 700ms';
      brasfortTitle.style.transform = 'scale(1)';
      brasfortTitle.style.opacity = '1';
    }, 80);
  })();

  // ---------- HELPERS ----------
  function appendBubble(text, cls='bot', html=false){
    const el = document.createElement('div');
    el.className = 'bubble ' + cls;
    if(html) el.innerHTML = text;
    else el.textContent = text;
    messages.appendChild(el);
    messages.scrollTop = messages.scrollHeight;
    return el;
  }

  function showTypingBubble(messageLabel = 'BIA est√° pensando...'){
    const t = document.createElement('div');
    t.className = 'bubble bot typing';
    t.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span> ' + messageLabel;
    messages.appendChild(t);
    messages.scrollTop = messages.scrollHeight;
    return t;
  }

  function renderOptions(opts){
    const container = document.createElement('div');
    container.className = 'options';
    opts.forEach((opt)=>{
      const b = document.createElement('button');
      b.className = 'opt';
      b.textContent = opt.t;
      b.onclick = ()=> selectOption(opt, container);
      container.appendChild(b);
    });
    messages.appendChild(container);
    messages.scrollTop = messages.scrollHeight;
    return container;
  }

  // ---------- SELE√á√ÉO ----------
  function selectOption(opt, container){
    appendBubble(opt.t, 'user');
    score += opt.p;
    container.remove();

    const thinking = showTypingBubble();
    const thinkingTime = 900 + Math.floor(Math.random()*900);
    setTimeout(()=> {
      thinking.remove();
      appendBubble(opt.feedback, 'bot');

      index++;
      if(index < roteiro.length){
        setTimeout(()=> askQuestion(index), 800);
      } else {
        setTimeout(showResultCard, 900);
      }
    }, thinkingTime);
  }

  function askQuestion(i){
    const t = showTypingBubble('BIA est√° preparando a pr√≥xima pergunta...');
    const delay = 500 + Math.floor(Math.random()*600);
    setTimeout(()=> {
      t.remove();
      const q = roteiro[i];
      appendBubble('<strong>'+ q.q +'</strong>', 'bot', true);
      renderOptions(q.opts);
    }, delay);
  }

  // ---------- INICIO DA CONVERSA ----------
  function startConversation(){
    // hide intro overlay (if visible)
    if(introOverlay && introOverlay.style.display !== 'none') {
      introOverlay.style.display = 'none';
      introOverlay.setAttribute('aria-hidden','true');
    }

    // reset
    messages.innerHTML = '';
    index = 0; score = 0; started = true; resultCard = null; tipsBubble = null;
    startBtn.textContent = 'Reiniciar conversa';
    startBtn.classList.add('restart');

    // initial BIA intro as chat message (with typing)
    const t = showTypingBubble('BIA est√° iniciando a avalia√ß√£o...');
    setTimeout(()=> {
      t.remove();
      appendBubble('Ol√° ‚Äî sou a BIA, Intelig√™ncia Artificial da Brasfort.'); // intro short
      appendBubble('Vou aplicar uma breve avalia√ß√£o sobre sua adapta√ß√£o √† mudan√ßa. Responda as op√ß√µes conforme achar mais adequado.'); // instruction
      setTimeout(()=> askQuestion(0), 900);
    }, 1000);
  }

  // ---------- RESULTADO (CARD COLORIDO + MENSAGEM DE ORIENTA√á√ÉO) ----------
  function showResultCard(){
    const percent = Math.min(Math.round((score / maxScore) * 100), 100);
    let label='', explanation='', color='', textColor='#08304a';

    if(percent <= 25){
      label = 'Choque / Incerteza';
      explanation = 'Com base nas suas respostas, voc√™ est√° no come√ßo do processo de assimila√ß√£o. Priorize compreens√£o objetiva do prop√≥sito e pe√ßa apoio direto.';
      color = 'var(--card-red)';
      textColor = '#6b1e1e';
    } else if(percent <= 50){
      label = 'Nega√ß√£o / Crise';
      explanation = 'Voc√™ demonstra resist√™ncia ou d√∫vidas. Foque em a√ß√µes pequenas e aprendizado com colegas que j√° aplicam.';
      color = 'var(--card-yellow)';
      textColor = '#6b4900';
    } else if(percent <= 75){
      label = 'Aceita√ß√£o / Decis√£o';
      explanation = 'Voc√™ est√° experimentando e aprendendo. Continue consolidando rotinas para ganhar confian√ßa e consist√™ncia.';
      color = 'var(--card-green)';
      textColor = '#165c2b';
    } else {
      label = 'Integra√ß√£o';
      explanation = 'Voc√™ incorporou o novo e j√° serve de refer√™ncia. Mantenha o suporte a colegas e proponha melhorias cont√≠nuas.';
      color = 'var(--card-blue)';
      textColor = '#06314d';
    }

    // create card
    resultCard = document.createElement('div');
    resultCard.className = 'result-card';
    resultCard.style.background = color;
    resultCard.style.color = textColor;
    resultCard.innerHTML = `
      <div class="stage-title">Est√°gio detectado ‚Äî <strong>${label}</strong></div>
      <div class="stage-desc">${explanation}</div>
      <div class="actions-row">
        <button class="action-btn action-whats" onclick="openWhats()">Falar com RH</button>
        <button class="action-btn" id="showTipsBtn">Ver sugest√µes</button>
      </div>
    `;
    messages.appendChild(resultCard);
    messages.scrollTop = messages.scrollHeight;

    // animate in
    requestAnimationFrame(()=> {
      resultCard.style.opacity = '1';
      resultCard.style.transform = 'translateY(0) scale(1)';
    });

    // after card, show separate oriented message when user clicks "Ver sugest√µes"
    const showBtn = resultCard.querySelector('#showTipsBtn');
    showBtn.onclick = () => {
      if(tipsBubble) return;
      appendBubble('Minha sugest√£o pr√°tica ‚Äî passos objetivos para avan√ßar:', 'bot');
      const tips = getTipsForStage(label);
      const tipsHtml = `<ul style="margin:8px 0 0 18px; padding-left:18px;">` +
                       tips.map(t => `<li style="margin-bottom:6px;">${t}</li>`).join('') +
                       `</ul>`;
      tipsBubble = appendBubble(tipsHtml, 'bot', true);
      appendBubble('Se preferir apoio humano, use o bot√£o "Falar com RH" no card acima.', 'bot');
      showBtn.style.display = 'none';
    };

    // ensure restart button state
    startBtn.textContent = 'Reiniciar conversa';
    startBtn.classList.add('restart');
  }

  function getTipsForStage(label){
    if(label === 'Choque / Incerteza'){
      return [
        'Pe√ßa um resumo objetivo ao l√≠der sobre os motivos da mudan√ßa.',
        'Reserve 15 minutos para revisar a documenta√ß√£o essencial.',
        'Liste 3 d√∫vidas e encaminhe ao seu gestor ou RH.'
      ];
    }
    if(label === 'Nega√ß√£o / Crise'){
      return [
        'Escolha uma atividade pequena para testar por 3 dias.',
        'Converse com um colega que j√° adotou o novo processo.',
        'Registre resultados simples: o que funcionou e o que ajustar.'
      ];
    }
    if(label === 'Aceita√ß√£o / Decis√£o'){
      return [
        'Padronize passos que deram certo para replicar.',
        'Pe√ßa feedback do l√≠der sobre suas pr√°ticas iniciais.',
        'Compartilhe um aprendizado com um colega esta semana.'
      ];
    }
    return [
      'Documente e compartilhe pr√°ticas bem-sucedidas com o time.',
      'Organize um microtreino de 15 minutos para colegas.',
      'Proponha uma melhoria com base na sua experi√™ncia pr√°tica.'
    ];
  }

  // ---------- HANDLERS ----------
  // start via intro button
  introStartBtn.addEventListener('click', startConversation);
  // footer start button behavior
  startBtn.addEventListener('click', () => {
    // if intro still visible, hide and start; else simply restart
    if(introOverlay && introOverlay.style.display !== 'none') {
      startConversation();
    } else {
      startConversation();
    }
  });

  // profile modal
  avatarBtn.addEventListener('click', () => {
    profileModal.style.display = 'flex';
    profileModal.setAttribute('aria-hidden','false');
  });
  window.closeModal = () => {
    profileModal.style.display = 'none';
    profileModal.setAttribute('aria-hidden','true');
  };

  // call / video / back
  callBtn.addEventListener('click', openWhats);
  videoBtn.addEventListener('click', ()=> alert('Recurso de v√≠deo n√£o est√° dispon√≠vel no momento.'));
  backBtn.addEventListener('click', ()=> history.back());

  // utilities exposed for buttons
  window.openWhats = () => window.open('https://wa.me/5561996050605', '_blank');
  window.copyNumber = () => {
    navigator.clipboard?.writeText('(61) 99605-0605');
    alert('N√∫mero copiado: (61) 99605-0605');
  };

  // initial tiny intro inside chat as fallback (will be removed when introOverlay used)
  (function initialIntroFallback(){
    // placeholder message will be replaced when the user starts via intro overlay
    // but keep small hint in case overlay blocked
    appendBubble('Toque em "Come√ßar agora" para iniciar a avalia√ß√£o conduzida pela BIA.', 'bot');
  })();
</script>
</body>
</html>


